"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.processGovernorBravoEvent = exports.governorBravoCommands = void 0;
const World_1 = require("../World");
const GovernorBravoBuilder_1 = require("../Builder/GovernorBravoBuilder");
const Invokation_1 = require("../Invokation");
const CoreValue_1 = require("../CoreValue");
const Command_1 = require("../Command");
const Verify_1 = require("../Verify");
const BravoProposalEvent_1 = require("./BravoProposalEvent");
const Utils_1 = require("../Utils");
const GovernorBravoValue_1 = require("../Value/GovernorBravoValue");
const Networks_1 = require("../Networks");
async function genGovernor(world, from, params) {
    let { world: nextWorld, governor, govData } = await GovernorBravoBuilder_1.buildGovernor(world, from, params);
    world = nextWorld;
    return World_1.addAction(world, `Deployed GovernorBravo ${govData.contract} to address ${governor._address}`, govData.invokation);
}
async function verifyGovernor(world, governor, apiKey, modelName, contractName) {
    if (world.isLocalNetwork()) {
        world.printer.printLine(`Politely declining to verify on local network: ${world.network}.`);
    }
    else {
        await Verify_1.verify(world, apiKey, modelName, contractName, governor._address);
    }
    return world;
}
async function mergeABI(world, from, governorDelegator, governorDelegate) {
    if (!world.dryRun) {
        // Skip this specifically on dry runs since it's likely to crash due to a number of reasons
        world = await Networks_1.mergeContractABI(world, "GovernorBravo", governorDelegator, governorDelegator.name, governorDelegate.name);
    }
    return world;
}
async function propose(world, from, governor, targets, values, signatures, calldatas, description) {
    const invokation = await Invokation_1.invoke(world, governor.methods.propose(targets, values, signatures, calldatas, description), from);
    return World_1.addAction(world, `Created new proposal "${description}" with id=${invokation.value} in Governor`, invokation);
}
async function setVotingDelay(world, from, governor, newVotingDelay) {
    let invokation = await Invokation_1.invoke(world, governor.methods._setVotingDelay(newVotingDelay.encode()), from);
    world = World_1.addAction(world, `Set voting delay to ${newVotingDelay.show()}`, invokation);
    return world;
}
async function setVotingPeriod(world, from, governor, newVotingPeriod) {
    let invokation = await Invokation_1.invoke(world, governor.methods._setVotingPeriod(newVotingPeriod.encode()), from);
    world = World_1.addAction(world, `Set voting period to ${newVotingPeriod.show()}`, invokation);
    return world;
}
async function setProposalThreshold(world, from, governor, newProposalThreshold) {
    let invokation = await Invokation_1.invoke(world, governor.methods._setProposalThreshold(newProposalThreshold.encode()), from);
    world = World_1.addAction(world, `Set proposal threshold to ${newProposalThreshold.show()}`, invokation);
    return world;
}
async function setWhitelistAccountExpiration(world, from, governor, account, expiration) {
    let invokation = await Invokation_1.invoke(world, governor.methods._setWhitelistAccountExpiration(account, expiration.encode()), from);
    world = World_1.addAction(world, `Set account whitelist expiration for ${account} to ${expiration.encode()}`, invokation);
    return world;
}
async function setWhitelistGuardian(world, from, governor, account) {
    let invokation = await Invokation_1.invoke(world, governor.methods._setWhitelistGuardian(account), from);
    world = World_1.addAction(world, `Set whitelist guardian to ${account}`, invokation);
    return world;
}
async function setImplementation(world, from, governor, newImplementation) {
    let invokation = await Invokation_1.invoke(world, governor.methods._setImplementation(newImplementation._address), from);
    world = World_1.addAction(world, `Set GovernorBravo implementation to ${newImplementation}`, invokation);
    mergeABI(world, from, governor, newImplementation);
    return world;
}
async function initiate(world, from, governor, governorAlpha) {
    let invokation = await Invokation_1.invoke(world, governor.methods._initiate(governorAlpha), from);
    world = World_1.addAction(world, `Initiated governor from GovernorAlpha at ${governorAlpha}`, invokation);
    return world;
}
async function harnessInitiate(world, from, governor) {
    let invokation = await Invokation_1.invoke(world, governor.methods._initiate(), from);
    world = World_1.addAction(world, `Initiated governor using harness function`, invokation);
    return world;
}
async function setPendingAdmin(world, from, governor, newPendingAdmin) {
    let invokation = await Invokation_1.invoke(world, governor.methods._setPendingAdmin(newPendingAdmin), from);
    world = World_1.addAction(world, `Governor pending admin set to ${newPendingAdmin}`, invokation);
    return world;
}
async function acceptAdmin(world, from, governor) {
    let invokation = await Invokation_1.invoke(world, governor.methods._acceptAdmin(), from);
    world = World_1.addAction(world, `Governor admin accepted`, invokation);
    return world;
}
async function setBlockNumber(world, from, governor, blockNumber) {
    return World_1.addAction(world, `Set Governor blockNumber to ${blockNumber.show()}`, await Invokation_1.invoke(world, governor.methods.setBlockNumber(blockNumber.encode()), from));
}
async function setBlockTimestamp(world, from, governor, blockTimestamp) {
    return World_1.addAction(world, `Set Governor blockTimestamp to ${blockTimestamp.show()}`, await Invokation_1.invoke(world, governor.methods.setBlockTimestamp(blockTimestamp.encode()), from));
}
function governorBravoCommands() {
    return [
        new Command_1.Command(`
        #### Deploy

        * "Deploy ...params" - Generates a new Governor
        * E.g. "Governor Deploy BravoDelegate"
      `, "Deploy", [new Command_1.Arg("params", CoreValue_1.getEventV, { variadic: true })], (world, from, { params }) => genGovernor(world, from, params.val)),
        new Command_1.Command(`
        #### Propose

        * "Governor <Governor> Propose description:<String> targets:<List> signatures:<List> callDataArgs:<List>" - Creates a new proposal in Governor
        * E.g. "Governor GovernorScenario Propose "New Interest Rate" [(Address cDAI)] [0] [("_setInterestRateModel(address)")] [[(Address MyInterestRateModel)]]
      `, "Propose", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("description", CoreValue_1.getStringV),
            new Command_1.Arg("targets", CoreValue_1.getArrayV(CoreValue_1.getAddressV)),
            new Command_1.Arg("values", CoreValue_1.getArrayV(CoreValue_1.getNumberV)),
            new Command_1.Arg("signatures", CoreValue_1.getArrayV(CoreValue_1.getStringV)),
            new Command_1.Arg("callDataArgs", CoreValue_1.getArrayV(CoreValue_1.getArrayV(CoreValue_1.getCoreValue))),
        ], async (world, from, { governor, description, targets, values, signatures, callDataArgs }) => {
            const targetsU = targets.val.map((a) => a.val);
            const valuesU = values.val.map((a) => a.encode());
            const signaturesU = signatures.val.map((a) => a.val);
            const callDatasU = signatures.val.reduce((acc, cur, idx) => {
                const args = Utils_1.rawValues(callDataArgs.val[idx]);
                acc.push(Utils_1.encodeParameters(world, cur.val, args));
                return acc;
            }, []);
            return await propose(world, from, governor, targetsU, valuesU, signaturesU, callDatasU, description.val);
        }, { namePos: 1 }),
        new Command_1.Command(`
        #### Proposal

        * "GovernorBravo <Governor> Proposal <...proposalEvent>" - Returns information about a proposal
        * E.g. "GovernorBravo GovernorScenario Proposal LastProposal Vote For"
      `, "Proposal", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("params", CoreValue_1.getEventV, { variadic: true }),
        ], (world, from, { governor, params }) => BravoProposalEvent_1.processProposalEvent(world, governor, params.val, from), { namePos: 1 }),
        new Command_1.Command(`
        #### SetBlockNumber

        * "Governor <Governor> SetBlockNumber <Seconds>" - Sets the blockNumber of the Governance Harness
        * E.g. "GovernorBravo SetBlockNumber 500"
    `, "SetBlockNumber", [new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV), new Command_1.Arg("blockNumber", CoreValue_1.getNumberV)], (world, from, { governor, blockNumber }) => setBlockNumber(world, from, governor, blockNumber), { namePos: 1 }),
        new Command_1.Command(`
        #### SetBlockTimestamp

        * "Governor <Governor> SetBlockNumber <Seconds>" - Sets the blockTimestamp of the Governance Harness
        * E.g. "GovernorBravo GovernorScenario SetBlockTimestamp 500"
    `, "SetBlockTimestamp", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("blockTimestamp", CoreValue_1.getNumberV),
        ], (world, from, { governor, blockTimestamp }) => setBlockTimestamp(world, from, governor, blockTimestamp), { namePos: 1 }),
        new Command_1.Command(`
        #### SetVotingDelay

        * "GovernorBravo <Governor> SetVotingDelay <Blocks>" - Sets the voting delay of the GovernorBravo
        * E.g. "GovernorBravo GovernorBravoScenario SetVotingDelay 2"
    `, "SetVotingDelay", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("newVotingDelay", CoreValue_1.getNumberV),
        ], (world, from, { governor, newVotingDelay }) => setVotingDelay(world, from, governor, newVotingDelay), { namePos: 1 }),
        new Command_1.Command(`
        #### SetVotingPeriod

        * "GovernorBravo <Governor> SetVotingPeriod <Blocks>" - Sets the voting period of the GovernorBravo
        * E.g. "GovernorBravo GovernorBravoScenario SetVotingPeriod 500"
    `, "SetVotingPeriod", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("newVotingPeriod", CoreValue_1.getNumberV),
        ], (world, from, { governor, newVotingPeriod }) => setVotingPeriod(world, from, governor, newVotingPeriod), { namePos: 1 }),
        new Command_1.Command(`
        #### SetProposalThreshold

        * "GovernorBravo <Governor> SetProposalThreshold <Comp>" - Sets the proposal threshold of the GovernorBravo
        * E.g. "GovernorBravo GovernorBravoScenario SetProposalThreshold 500e18"
    `, "SetProposalThreshold", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("newProposalThreshold", CoreValue_1.getNumberV),
        ], (world, from, { governor, newProposalThreshold }) => setProposalThreshold(world, from, governor, newProposalThreshold), { namePos: 1 }),
        new Command_1.Command(`
        #### SetWhitelistAccountExpiration

        * "GovernorBravo <Governor> SetWhitelistAccountExpiration <Account> <Expiration>" - Sets whitelist account expiration (account can propose without proposal threshold until expiration)
        * E.g. "GovernorBravo GovernorBravoScenario SetWhitelistAccountExpiration Arr00 1626387743"
    `, "SetWhitelistAccountExpiration", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("address", CoreValue_1.getAddressV),
            new Command_1.Arg("expiration", CoreValue_1.getNumberV),
        ], (world, from, { governor, address, expiration }) => setWhitelistAccountExpiration(world, from, governor, address.val, expiration), { namePos: 1 }),
        new Command_1.Command(`
        #### SetWhitelistGuardian

        * "GovernorBravo <Governor> SetWhitelistGuardian <Account>" - Sets whitelistGuardian account
        * E.g. "GovernorBravo GovernorBravoScenario SetWhitelistGuardian Robert"
    `, "SetWhitelistGuardian", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("address", CoreValue_1.getAddressV),
        ], (world, from, { governor, address, expiration }) => setWhitelistGuardian(world, from, governor, address.val), { namePos: 1 }),
        new Command_1.Command(`
        #### Initiate

        * "GovernorBravo <Governor> Initiate <AddressV>" - Initiates the Governor relieving the given GovernorAlpha
        * E.g. "GovernorBravo GovernorBravoScenario Initiate (Address GovernorAlpha)"
    `, "Initiate", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("governorAlpha", CoreValue_1.getAddressV),
        ], (world, from, { governor, governorAlpha }) => initiate(world, from, governor, governorAlpha.val), { namePos: 1 }),
        new Command_1.Command(`
        #### HarnessInitiate

        * "GovernorBravo <Governor> HarnessInitiate" - Uses harness function to bypass initiate for testing
        * E.g. "GovernorBravo GovernorBravoScenario HarnessInitiate"
    `, "HarnessInitiate", [new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV)], (world, from, { governor }) => harnessInitiate(world, from, governor), { namePos: 1 }),
        new Command_1.Command(`
        #### SetImplementation

        * "GovernorBravo <Governor> SetImplementation <Governor>" - Sets the address for the GovernorBravo implementation
        * E.g. "GovernorBravo GovernorBravoScenario SetImplementation newImplementation"
    `, "SetImplementation", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("newImplementation", GovernorBravoValue_1.getGovernorV),
        ], (world, from, { governor, newImplementation }) => setImplementation(world, from, governor, newImplementation), { namePos: 1 }),
        new Command_1.Command(`
        #### SetPendingAdmin

        * "GovernorBravo <Governor> SetPendingAdmin <AddressV>" - Sets the address for the GovernorBravo pending admin
        * E.g. "GovernorBravo GovernorBravoScenario SetPendingAdmin newAdmin"
    `, "SetPendingAdmin", [
            new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("newPendingAdmin", CoreValue_1.getAddressV),
        ], (world, from, { governor, newPendingAdmin }) => setPendingAdmin(world, from, governor, newPendingAdmin.val), { namePos: 1 }),
        new Command_1.Command(`
        #### AcceptAdmin

        * "GovernorBravo <Governor> AcceptAdmin" - Pending admin accepts the admin role
        * E.g. "GovernorBravo GovernorBravoScenario AcceptAdmin"
    `, "AcceptAdmin", [new Command_1.Arg("governor", GovernorBravoValue_1.getGovernorV)], (world, from, { governor }) => acceptAdmin(world, from, governor), { namePos: 1 }),
        new Command_1.Command(`#### MergeABI

        * "ComptrollerImpl <Impl> MergeABI" - Merges the ABI, as if it was a become.
        * E.g. "ComptrollerImpl MyImpl MergeABI
      `, "MergeABI", [
            new Command_1.Arg("governorDelegator", GovernorBravoValue_1.getGovernorV),
            new Command_1.Arg("governorDelegate", GovernorBravoValue_1.getGovernorV),
        ], (world, from, { governorDelegator, governorDelegate }) => mergeABI(world, from, governorDelegator, governorDelegate), { namePos: 1 }),
    ];
}
exports.governorBravoCommands = governorBravoCommands;
async function processGovernorBravoEvent(world, event, from) {
    return await Command_1.processCommandEvent("Governor", governorBravoCommands(), world, event, from);
}
exports.processGovernorBravoEvent = processGovernorBravoEvent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR292ZXJub3JCcmF2b0V2ZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL0V2ZW50L0dvdmVybm9yQnJhdm9FdmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxvQ0FBNEM7QUFFNUMsMEVBQWdFO0FBQ2hFLDhDQUF1QztBQUN2Qyw0Q0FPc0I7QUFFdEIsd0NBQXFFO0FBQ3JFLHNDQUFtQztBQUVuQyw2REFBNEQ7QUFDNUQsb0NBQXVEO0FBQ3ZELG9FQUEyRDtBQUMzRCwwQ0FBK0M7QUFFL0MsS0FBSyxVQUFVLFdBQVcsQ0FDeEIsS0FBWSxFQUNaLElBQVksRUFDWixNQUFhO0lBRWIsSUFBSSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxHQUFHLE1BQU0sb0NBQWEsQ0FDL0QsS0FBSyxFQUNMLElBQUksRUFDSixNQUFNLENBQ1AsQ0FBQztJQUNGLEtBQUssR0FBRyxTQUFTLENBQUM7SUFFbEIsT0FBTyxpQkFBUyxDQUNkLEtBQUssRUFDTCwwQkFBMEIsT0FBTyxDQUFDLFFBQVEsZUFBZSxRQUFRLENBQUMsUUFBUSxFQUFFLEVBQzVFLE9BQU8sQ0FBQyxVQUFVLENBQ25CLENBQUM7QUFDSixDQUFDO0FBRUQsS0FBSyxVQUFVLGNBQWMsQ0FDM0IsS0FBWSxFQUNaLFFBQXVCLEVBQ3ZCLE1BQWMsRUFDZCxTQUFpQixFQUNqQixZQUFvQjtJQUVwQixJQUFJLEtBQUssQ0FBQyxjQUFjLEVBQUUsRUFBRTtRQUMxQixLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FDckIsa0RBQWtELEtBQUssQ0FBQyxPQUFPLEdBQUcsQ0FDbkUsQ0FBQztLQUNIO1NBQU07UUFDTCxNQUFNLGVBQU0sQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0tBQ3pFO0lBRUQsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBRUQs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QkFBbUIsQ0FDOUIsVUFBVSxFQUNWLHFCQUFxQixFQUFFLEVBQ3ZCLEtBQUssRUFDTCxLQUFLLEVBQ0wsSUFBSSxDQUNMLENBQUM7QUFDSixDQUFDO0FBWkQsOERBWUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudCB9IGZyb20gXCIuLi9FdmVudFwiO1xuaW1wb3J0IHsgYWRkQWN0aW9uLCBXb3JsZCB9IGZyb20gXCIuLi9Xb3JsZFwiO1xuaW1wb3J0IHsgR292ZXJub3JCcmF2byB9IGZyb20gXCIuLi9Db250cmFjdC9Hb3Zlcm5vckJyYXZvXCI7XG5pbXBvcnQgeyBidWlsZEdvdmVybm9yIH0gZnJvbSBcIi4uL0J1aWxkZXIvR292ZXJub3JCcmF2b0J1aWxkZXJcIjtcbmltcG9ydCB7IGludm9rZSB9IGZyb20gXCIuLi9JbnZva2F0aW9uXCI7XG5pbXBvcnQge1xuICBnZXRBZGRyZXNzVixcbiAgZ2V0QXJyYXlWLFxuICBnZXRFdmVudFYsXG4gIGdldE51bWJlclYsXG4gIGdldFN0cmluZ1YsXG4gIGdldENvcmVWYWx1ZSxcbn0gZnJvbSBcIi4uL0NvcmVWYWx1ZVwiO1xuaW1wb3J0IHsgQWRkcmVzc1YsIEFycmF5ViwgRXZlbnRWLCBOdW1iZXJWLCBTdHJpbmdWIH0gZnJvbSBcIi4uL1ZhbHVlXCI7XG5pbXBvcnQgeyBBcmcsIENvbW1hbmQsIHByb2Nlc3NDb21tYW5kRXZlbnQsIFZpZXcgfSBmcm9tIFwiLi4vQ29tbWFuZFwiO1xuaW1wb3J0IHsgdmVyaWZ5IH0gZnJvbSBcIi4uL1ZlcmlmeVwiO1xuaW1wb3J0IHsgZW5jb2RlZE51bWJlciB9IGZyb20gXCIuLi9FbmNvZGluZ1wiO1xuaW1wb3J0IHsgcHJvY2Vzc1Byb3Bvc2FsRXZlbnQgfSBmcm9tIFwiLi9CcmF2b1Byb3Bvc2FsRXZlbnRcIjtcbmltcG9ydCB7IGVuY29kZVBhcmFtZXRlcnMsIHJhd1ZhbHVlcyB9IGZyb20gXCIuLi9VdGlsc1wiO1xuaW1wb3J0IHsgZ2V0R292ZXJub3JWIH0gZnJvbSBcIi4uL1ZhbHVlL0dvdmVybm9yQnJhdm9WYWx1ZVwiO1xuaW1wb3J0IHsgbWVyZ2VDb250cmFjdEFCSSB9IGZyb20gXCIuLi9OZXR3b3Jrc1wiO1xuXG5hc3luYyBmdW5jdGlvbiBnZW5Hb3Zlcm5vcihcbiAgd29ybGQ6IFdvcmxkLFxuICBmcm9tOiBzdHJpbmcsXG4gIHBhcmFtczogRXZlbnRcbik6IFByb21pc2U8V29ybGQ+IHtcbiAgbGV0IHsgd29ybGQ6IG5leHRXb3JsZCwgZ292ZXJub3IsIGdvdkRhdGEgfSA9IGF3YWl0IGJ1aWxkR292ZXJub3IoXG4gICAgd29ybGQsXG4gICAgZnJvbSxcbiAgICBwYXJhbXNcbiAgKTtcbiAgd29ybGQgPSBuZXh0V29ybGQ7XG5cbiAgcmV0dXJuIGFkZEFjdGlvbihcbiAgICB3b3JsZCxcbiAgICBgRGVwbG95ZWQgR292ZXJub3JCcmF2byAke2dvdkRhdGEuY29udHJhY3R9IHRvIGFkZHJlc3MgJHtnb3Zlcm5vci5fYWRkcmVzc31gLFxuICAgIGdvdkRhdGEuaW52b2thdGlvblxuICApO1xufVxuXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlHb3Zlcm5vcihcbiAgd29ybGQ6IFdvcmxkLFxuICBnb3Zlcm5vcjogR292ZXJub3JCcmF2byxcbiAgYXBpS2V5OiBzdHJpbmcsXG4gIG1vZGVsTmFtZTogc3RyaW5nLFxuICBjb250cmFjdE5hbWU6IHN0cmluZ1xuKTogUHJvbWlzZTxXb3JsZD4ge1xuICBpZiAod29ybGQuaXNMb2NhbE5ldHdvcmsoKSkge1xuICAgIHdvcmxkLnByaW50ZXIucHJpbnRMaW5lKFxuICAgICAgYFBvbGl0ZWx5IGRlY2xpbmluZyB0byB2ZXJpZnkgb24gbG9jYWwgbmV0d29yazogJHt3b3JsZC5uZXR3b3JrfS5gXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBhd2FpdCB2ZXJpZnkod29ybGQsIGFwaUtleSwgbW9kZWxOYW1lLCBjb250cmFjdE5hbWUsIGdvdmVybm9yLl9hZGRyZXNzKTtcbiAgfVxuXG4gIHJldHVybiB3b3JsZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbWVyZ2VBQkkoXG4gIHdvcmxkOiBXb3JsZCxcbiAgZnJvbTogc3RyaW5nLFxuICBnb3Zlcm5vckRlbGVnYXRvcjogR292ZXJub3JCcmF2byxcbiAgZ292ZXJub3JEZWxlZ2F0ZTogR292ZXJub3JCcmF2b1xuKTogUHJvbWlzZTxXb3JsZD4ge1xuICBpZiAoIXdvcmxkLmRyeVJ1bikge1xuICAgIC8vIFNraXAgdGhpcyBzcGVjaWZpY2FsbHkgb24gZHJ5IHJ1bnMgc2luY2UgaXQncyBsaWtlbHkgdG8gY3Jhc2ggZHVlIHRvIGEgbnVtYmVyIG9mIHJlYXNvbnNcbiAgICB3b3JsZCA9IGF3YWl0IG1lcmdlQ29udHJhY3RBQkkoXG4gICAgICB3b3JsZCxcbiAgICAgIFwiR292ZXJub3JCcmF2b1wiLFxuICAgICAgZ292ZXJub3JEZWxlZ2F0b3IsXG4gICAgICBnb3Zlcm5vckRlbGVnYXRvci5uYW1lLFxuICAgICAgZ292ZXJub3JEZWxlZ2F0ZS5uYW1lXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiB3b3JsZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcHJvcG9zZShcbiAgd29ybGQ6IFdvcmxkLFxuICBmcm9tOiBzdHJpbmcsXG4gIGdvdmVybm9yOiBHb3Zlcm5vckJyYXZvLFxuICB0YXJnZXRzOiBzdHJpbmdbXSxcbiAgdmFsdWVzOiBlbmNvZGVkTnVtYmVyW10sXG4gIHNpZ25hdHVyZXM6IHN0cmluZ1tdLFxuICBjYWxsZGF0YXM6IHN0cmluZ1tdLFxuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4pOiBQcm9taXNlPFdvcmxkPiB7XG4gIGNvbnN0IGludm9rYXRpb24gPSBhd2FpdCBpbnZva2UoXG4gICAgd29ybGQsXG4gICAgZ292ZXJub3IubWV0aG9kcy5wcm9wb3NlKFxuICAgICAgdGFyZ2V0cyxcbiAgICAgIHZhbHVlcyxcbiAgICAgIHNpZ25hdHVyZXMsXG4gICAgICBjYWxsZGF0YXMsXG4gICAgICBkZXNjcmlwdGlvblxuICAgICksXG4gICAgZnJvbVxuICApO1xuICByZXR1cm4gYWRkQWN0aW9uKFxuICAgIHdvcmxkLFxuICAgIGBDcmVhdGVkIG5ldyBwcm9wb3NhbCBcIiR7ZGVzY3JpcHRpb259XCIgd2l0aCBpZD0ke2ludm9rYXRpb24udmFsdWV9IGluIEdvdmVybm9yYCxcbiAgICBpbnZva2F0aW9uXG4gICk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNldFZvdGluZ0RlbGF5KFxuICB3b3JsZDogV29ybGQsXG4gIGZyb206IHN0cmluZyxcbiAgZ292ZXJub3I6IEdvdmVybm9yQnJhdm8sXG4gIG5ld1ZvdGluZ0RlbGF5OiBOdW1iZXJWXG4pOiBQcm9taXNlPFdvcmxkPiB7XG4gIGxldCBpbnZva2F0aW9uID0gYXdhaXQgaW52b2tlKFxuICAgIHdvcmxkLFxuICAgIGdvdmVybm9yLm1ldGhvZHMuX3NldFZvdGluZ0RlbGF5KG5ld1ZvdGluZ0RlbGF5LmVuY29kZSgpKSxcbiAgICBmcm9tXG4gICk7XG5cbiAgd29ybGQgPSBhZGRBY3Rpb24oXG4gICAgd29ybGQsXG4gICAgYFNldCB2b3RpbmcgZGVsYXkgdG8gJHtuZXdWb3RpbmdEZWxheS5zaG93KCl9YCxcbiAgICBpbnZva2F0aW9uXG4gICk7XG5cbiAgcmV0dXJuIHdvcmxkO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzZXRWb3RpbmdQZXJpb2QoXG4gIHdvcmxkOiBXb3JsZCxcbiAgZnJvbTogc3RyaW5nLFxuICBnb3Zlcm5vcjogR292ZXJub3JCcmF2byxcbiAgbmV3Vm90aW5nUGVyaW9kOiBOdW1iZXJWXG4pOiBQcm9taXNlPFdvcmxkPiB7XG4gIGxldCBpbnZva2F0aW9uID0gYXdhaXQgaW52b2tlKFxuICAgIHdvcmxkLFxuICAgIGdvdmVybm9yLm1ldGhvZHMuX3NldFZvdGluZ1BlcmlvZChuZXdWb3RpbmdQZXJpb2QuZW5jb2RlKCkpLFxuICAgIGZyb21cbiAgKTtcblxuICB3b3JsZCA9IGFkZEFjdGlvbihcbiAgICB3b3JsZCxcbiAgICBgU2V0IHZvdGluZyBwZXJpb2QgdG8gJHtuZXdWb3RpbmdQZXJpb2Quc2hvdygpfWAsXG4gICAgaW52b2thdGlvblxuICApO1xuXG4gIHJldHVybiB3b3JsZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2V0UHJvcG9zYWxUaHJlc2hvbGQoXG4gIHdvcmxkOiBXb3JsZCxcbiAgZnJvbTogc3RyaW5nLFxuICBnb3Zlcm5vcjogR292ZXJub3JCcmF2byxcbiAgbmV3UHJvcG9zYWxUaHJlc2hvbGQ6IE51bWJlclZcbik6IFByb21pc2U8V29ybGQ+IHtcbiAgbGV0IGludm9rYXRpb24gPSBhd2FpdCBpbnZva2UoXG4gICAgd29ybGQsXG4gICAgZ292ZXJub3IubWV0aG9kcy5fc2V0UHJvcG9zYWxUaHJlc2hvbGQobmV3UHJvcG9zYWxUaHJlc2hvbGQuZW5jb2RlKCkpLFxuICAgIGZyb21cbiAgKTtcblxuICB3b3JsZCA9IGFkZEFjdGlvbihcbiAgICB3b3JsZCxcbiAgICBgU2V0IHByb3Bvc2FsIHRocmVzaG9sZCB0byAke25ld1Byb3Bvc2FsVGhyZXNob2xkLnNob3coKX1gLFxuICAgIGludm9rYXRpb25cbiAgKTtcblxuICByZXR1cm4gd29ybGQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNldFdoaXRlbGlzdEFjY291bnRFeHBpcmF0aW9uKFxuICB3b3JsZDogV29ybGQsXG4gIGZyb206IHN0cmluZyxcbiAgZ292ZXJub3I6IEdvdmVybm9yQnJhdm8sXG4gIGFjY291bnQ6IHN0cmluZyxcbiAgZXhwaXJhdGlvbjogTnVtYmVyVlxuKTogUHJvbWlzZTxXb3JsZD4ge1xuICBsZXQgaW52b2thdGlvbiA9IGF3YWl0IGludm9rZShcbiAgICB3b3JsZCxcbiAgICBnb3Zlcm5vci5tZXRob2RzLl9zZXRXaGl0ZWxpc3RBY2NvdW50RXhwaXJhdGlvbihhY2NvdW50LGV4cGlyYXRpb24uZW5jb2RlKCkpLFxuICAgIGZyb21cbiAgKTtcblxuICB3b3JsZCA9IGFkZEFjdGlvbihcbiAgICB3b3JsZCxcbiAgICBgU2V0IGFjY291bnQgd2hpdGVsaXN0IGV4cGlyYXRpb24gZm9yICR7YWNjb3VudH0gdG8gJHtleHBpcmF0aW9uLmVuY29kZSgpfWAsXG4gICAgaW52b2thdGlvblxuICApO1xuXG4gIHJldHVybiB3b3JsZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2V0V2hpdGVsaXN0R3VhcmRpYW4oXG4gIHdvcmxkOiBXb3JsZCxcbiAgZnJvbTogc3RyaW5nLFxuICBnb3Zlcm5vcjogR292ZXJub3JCcmF2byxcbiAgYWNjb3VudDogc3RyaW5nXG4pOiBQcm9taXNlPFdvcmxkPiB7XG4gIGxldCBpbnZva2F0aW9uID0gYXdhaXQgaW52b2tlKFxuICAgIHdvcmxkLFxuICAgIGdvdmVybm9yLm1ldGhvZHMuX3NldFdoaXRlbGlzdEd1YXJkaWFuKGFjY291bnQpLFxuICAgIGZyb21cbiAgKTtcblxuICB3b3JsZCA9IGFkZEFjdGlvbihcbiAgICB3b3JsZCxcbiAgICBgU2V0IHdoaXRlbGlzdCBndWFyZGlhbiB0byAke2FjY291bnR9YCxcbiAgICBpbnZva2F0aW9uXG4gICk7XG5cbiAgcmV0dXJuIHdvcmxkO1xufVxuXG5hc3luYyBmdW5jdGlvbiBzZXRJbXBsZW1lbnRhdGlvbihcbiAgd29ybGQ6IFdvcmxkLFxuICBmcm9tOiBzdHJpbmcsXG4gIGdvdmVybm9yOiBHb3Zlcm5vckJyYXZvLFxuICBuZXdJbXBsZW1lbnRhdGlvbjogR292ZXJub3JCcmF2b1xuKTogUHJvbWlzZTxXb3JsZD4ge1xuICBsZXQgaW52b2thdGlvbiA9IGF3YWl0IGludm9rZShcbiAgICB3b3JsZCxcbiAgICBnb3Zlcm5vci5tZXRob2RzLl9zZXRJbXBsZW1lbnRhdGlvbihuZXdJbXBsZW1lbnRhdGlvbi5fYWRkcmVzcyksXG4gICAgZnJvbVxuICApO1xuXG4gIHdvcmxkID0gYWRkQWN0aW9uKFxuICAgIHdvcmxkLFxuICAgIGBTZXQgR292ZXJub3JCcmF2byBpbXBsZW1lbnRhdGlvbiB0byAke25ld0ltcGxlbWVudGF0aW9ufWAsXG4gICAgaW52b2thdGlvblxuICApO1xuXG4gIG1lcmdlQUJJKHdvcmxkLCBmcm9tLCBnb3Zlcm5vciwgbmV3SW1wbGVtZW50YXRpb24pXG5cbiAgcmV0dXJuIHdvcmxkO1xufVxuXG5hc3luYyBmdW5jdGlvbiBpbml0aWF0ZShcbiAgd29ybGQ6IFdvcmxkLFxuICBmcm9tOiBzdHJpbmcsXG4gIGdvdmVybm9yOiBHb3Zlcm5vckJyYXZvLFxuICBnb3Zlcm5vckFscGhhOiBzdHJpbmdcbik6IFByb21pc2U8V29ybGQ+IHtcbiAgbGV0IGludm9rYXRpb24gPSBhd2FpdCBpbnZva2UoXG4gICAgd29ybGQsXG4gICAgZ292ZXJub3IubWV0aG9kcy5faW5pdGlhdGUoZ292ZXJub3JBbHBoYSksXG4gICAgZnJvbVxuICApO1xuXG4gIHdvcmxkID0gYWRkQWN0aW9uKFxuICAgIHdvcmxkLFxuICAgIGBJbml0aWF0ZWQgZ292ZXJub3IgZnJvbSBHb3Zlcm5vckFscGhhIGF0ICR7Z292ZXJub3JBbHBoYX1gLFxuICAgIGludm9rYXRpb25cbiAgKTtcblxuICByZXR1cm4gd29ybGQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhcm5lc3NJbml0aWF0ZShcbiAgd29ybGQ6IFdvcmxkLFxuICBmcm9tOiBzdHJpbmcsXG4gIGdvdmVybm9yOiBHb3Zlcm5vckJyYXZvXG4pOiBQcm9taXNlPFdvcmxkPiB7XG4gIGxldCBpbnZva2F0aW9uID0gYXdhaXQgaW52b2tlKHdvcmxkLCBnb3Zlcm5vci5tZXRob2RzLl9pbml0aWF0ZSgpLCBmcm9tKTtcblxuICB3b3JsZCA9IGFkZEFjdGlvbihcbiAgICB3b3JsZCxcbiAgICBgSW5pdGlhdGVkIGdvdmVybm9yIHVzaW5nIGhhcm5lc3MgZnVuY3Rpb25gLFxuICAgIGludm9rYXRpb25cbiAgKTtcblxuICByZXR1cm4gd29ybGQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNldFBlbmRpbmdBZG1pbihcbiAgd29ybGQ6IFdvcmxkLFxuICBmcm9tOiBzdHJpbmcsXG4gIGdvdmVybm9yOiBHb3Zlcm5vckJyYXZvLFxuICBuZXdQZW5kaW5nQWRtaW46IHN0cmluZ1xuKTogUHJvbWlzZTxXb3JsZD4ge1xuICBsZXQgaW52b2thdGlvbiA9IGF3YWl0IGludm9rZShcbiAgICB3b3JsZCxcbiAgICBnb3Zlcm5vci5tZXRob2RzLl9zZXRQZW5kaW5nQWRtaW4obmV3UGVuZGluZ0FkbWluKSxcbiAgICBmcm9tXG4gICk7XG5cbiAgd29ybGQgPSBhZGRBY3Rpb24oXG4gICAgd29ybGQsXG4gICAgYEdvdmVybm9yIHBlbmRpbmcgYWRtaW4gc2V0IHRvICR7bmV3UGVuZGluZ0FkbWlufWAsXG4gICAgaW52b2thdGlvblxuICApO1xuXG4gIHJldHVybiB3b3JsZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gYWNjZXB0QWRtaW4oXG4gIHdvcmxkOiBXb3JsZCxcbiAgZnJvbTogc3RyaW5nLFxuICBnb3Zlcm5vcjogR292ZXJub3JCcmF2b1xuKTogUHJvbWlzZTxXb3JsZD4ge1xuICBsZXQgaW52b2thdGlvbiA9IGF3YWl0IGludm9rZSh3b3JsZCwgZ292ZXJub3IubWV0aG9kcy5fYWNjZXB0QWRtaW4oKSwgZnJvbSk7XG5cbiAgd29ybGQgPSBhZGRBY3Rpb24od29ybGQsIGBHb3Zlcm5vciBhZG1pbiBhY2NlcHRlZGAsIGludm9rYXRpb24pO1xuXG4gIHJldHVybiB3b3JsZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2V0QmxvY2tOdW1iZXIoXG4gIHdvcmxkOiBXb3JsZCxcbiAgZnJvbTogc3RyaW5nLFxuICBnb3Zlcm5vcjogR292ZXJub3JCcmF2byxcbiAgYmxvY2tOdW1iZXI6IE51bWJlclZcbik6IFByb21pc2U8V29ybGQ+IHtcbiAgcmV0dXJuIGFkZEFjdGlvbihcbiAgICB3b3JsZCxcbiAgICBgU2V0IEdvdmVybm9yIGJsb2NrTnVtYmVyIHRvICR7YmxvY2tOdW1iZXIuc2hvdygpfWAsXG4gICAgYXdhaXQgaW52b2tlKFxuICAgICAgd29ybGQsXG4gICAgICBnb3Zlcm5vci5tZXRob2RzLnNldEJsb2NrTnVtYmVyKGJsb2NrTnVtYmVyLmVuY29kZSgpKSxcbiAgICAgIGZyb21cbiAgICApXG4gICk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNldEJsb2NrVGltZXN0YW1wKFxuICB3b3JsZDogV29ybGQsXG4gIGZyb206IHN0cmluZyxcbiAgZ292ZXJub3I6IEdvdmVybm9yQnJhdm8sXG4gIGJsb2NrVGltZXN0YW1wOiBOdW1iZXJWXG4pOiBQcm9taXNlPFdvcmxkPiB7XG4gIHJldHVybiBhZGRBY3Rpb24oXG4gICAgd29ybGQsXG4gICAgYFNldCBHb3Zlcm5vciBibG9ja1RpbWVzdGFtcCB0byAke2Jsb2NrVGltZXN0YW1wLnNob3coKX1gLFxuICAgIGF3YWl0IGludm9rZShcbiAgICAgIHdvcmxkLFxuICAgICAgZ292ZXJub3IubWV0aG9kcy5zZXRCbG9ja1RpbWVzdGFtcChibG9ja1RpbWVzdGFtcC5lbmNvZGUoKSksXG4gICAgICBmcm9tXG4gICAgKVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ292ZXJub3JCcmF2b0NvbW1hbmRzKCkge1xuICByZXR1cm4gW1xuICAgIG5ldyBDb21tYW5kPHsgcGFyYW1zOiBFdmVudFYgfT4oXG4gICAgICBgXG4gICAgICAgICMjIyMgRGVwbG95XG5cbiAgICAgICAgKiBcIkRlcGxveSAuLi5wYXJhbXNcIiAtIEdlbmVyYXRlcyBhIG5ldyBHb3Zlcm5vclxuICAgICAgICAqIEUuZy4gXCJHb3Zlcm5vciBEZXBsb3kgQnJhdm9EZWxlZ2F0ZVwiXG4gICAgICBgLFxuICAgICAgXCJEZXBsb3lcIixcbiAgICAgIFtuZXcgQXJnKFwicGFyYW1zXCIsIGdldEV2ZW50ViwgeyB2YXJpYWRpYzogdHJ1ZSB9KV0sXG4gICAgICAod29ybGQsIGZyb20sIHsgcGFyYW1zIH0pID0+IGdlbkdvdmVybm9yKHdvcmxkLCBmcm9tLCBwYXJhbXMudmFsKVxuICAgICksXG5cbiAgICBuZXcgQ29tbWFuZDx7XG4gICAgICBnb3Zlcm5vcjogR292ZXJub3JCcmF2bztcbiAgICAgIGRlc2NyaXB0aW9uOiBTdHJpbmdWO1xuICAgICAgdGFyZ2V0czogQXJyYXlWPEFkZHJlc3NWPjtcbiAgICAgIHZhbHVlczogQXJyYXlWPE51bWJlclY+O1xuICAgICAgc2lnbmF0dXJlczogQXJyYXlWPFN0cmluZ1Y+O1xuICAgICAgY2FsbERhdGFBcmdzOiBBcnJheVY8QXJyYXlWPFN0cmluZ1Y+PjtcbiAgICB9PihcbiAgICAgIGBcbiAgICAgICAgIyMjIyBQcm9wb3NlXG5cbiAgICAgICAgKiBcIkdvdmVybm9yIDxHb3Zlcm5vcj4gUHJvcG9zZSBkZXNjcmlwdGlvbjo8U3RyaW5nPiB0YXJnZXRzOjxMaXN0PiBzaWduYXR1cmVzOjxMaXN0PiBjYWxsRGF0YUFyZ3M6PExpc3Q+XCIgLSBDcmVhdGVzIGEgbmV3IHByb3Bvc2FsIGluIEdvdmVybm9yXG4gICAgICAgICogRS5nLiBcIkdvdmVybm9yIEdvdmVybm9yU2NlbmFyaW8gUHJvcG9zZSBcIk5ldyBJbnRlcmVzdCBSYXRlXCIgWyhBZGRyZXNzIGNEQUkpXSBbMF0gWyhcIl9zZXRJbnRlcmVzdFJhdGVNb2RlbChhZGRyZXNzKVwiKV0gW1soQWRkcmVzcyBNeUludGVyZXN0UmF0ZU1vZGVsKV1dXG4gICAgICBgLFxuICAgICAgXCJQcm9wb3NlXCIsXG4gICAgICBbXG4gICAgICAgIG5ldyBBcmcoXCJnb3Zlcm5vclwiLCBnZXRHb3Zlcm5vclYpLFxuICAgICAgICBuZXcgQXJnKFwiZGVzY3JpcHRpb25cIiwgZ2V0U3RyaW5nViksXG4gICAgICAgIG5ldyBBcmcoXCJ0YXJnZXRzXCIsIGdldEFycmF5VihnZXRBZGRyZXNzVikpLFxuICAgICAgICBuZXcgQXJnKFwidmFsdWVzXCIsIGdldEFycmF5VihnZXROdW1iZXJWKSksXG4gICAgICAgIG5ldyBBcmcoXCJzaWduYXR1cmVzXCIsIGdldEFycmF5VihnZXRTdHJpbmdWKSksXG4gICAgICAgIG5ldyBBcmcoXCJjYWxsRGF0YUFyZ3NcIiwgZ2V0QXJyYXlWKGdldEFycmF5VihnZXRDb3JlVmFsdWUpKSksXG4gICAgICBdLFxuICAgICAgYXN5bmMgKFxuICAgICAgICB3b3JsZCxcbiAgICAgICAgZnJvbSxcbiAgICAgICAgeyBnb3Zlcm5vciwgZGVzY3JpcHRpb24sIHRhcmdldHMsIHZhbHVlcywgc2lnbmF0dXJlcywgY2FsbERhdGFBcmdzIH1cbiAgICAgICkgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXRzVSA9IHRhcmdldHMudmFsLm1hcCgoYSkgPT4gYS52YWwpO1xuICAgICAgICBjb25zdCB2YWx1ZXNVID0gdmFsdWVzLnZhbC5tYXAoKGEpID0+IGEuZW5jb2RlKCkpO1xuICAgICAgICBjb25zdCBzaWduYXR1cmVzVSA9IHNpZ25hdHVyZXMudmFsLm1hcCgoYSkgPT4gYS52YWwpO1xuICAgICAgICBjb25zdCBjYWxsRGF0YXNVOiBzdHJpbmdbXSA9IHNpZ25hdHVyZXMudmFsLnJlZHVjZSgoYWNjLCBjdXIsIGlkeCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGFyZ3MgPSByYXdWYWx1ZXMoY2FsbERhdGFBcmdzLnZhbFtpZHhdKTtcbiAgICAgICAgICBhY2MucHVzaChlbmNvZGVQYXJhbWV0ZXJzKHdvcmxkLCBjdXIudmFsLCBhcmdzKSk7XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwgPHN0cmluZ1tdPltdKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHByb3Bvc2UoXG4gICAgICAgICAgd29ybGQsXG4gICAgICAgICAgZnJvbSxcbiAgICAgICAgICBnb3Zlcm5vcixcbiAgICAgICAgICB0YXJnZXRzVSxcbiAgICAgICAgICB2YWx1ZXNVLFxuICAgICAgICAgIHNpZ25hdHVyZXNVLFxuICAgICAgICAgIGNhbGxEYXRhc1UsXG4gICAgICAgICAgZGVzY3JpcHRpb24udmFsXG4gICAgICAgICk7XG4gICAgICB9LFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuICAgIG5ldyBDb21tYW5kPHsgZ292ZXJub3I6IEdvdmVybm9yQnJhdm87IHBhcmFtczogRXZlbnRWIH0+KFxuICAgICAgYFxuICAgICAgICAjIyMjIFByb3Bvc2FsXG5cbiAgICAgICAgKiBcIkdvdmVybm9yQnJhdm8gPEdvdmVybm9yPiBQcm9wb3NhbCA8Li4ucHJvcG9zYWxFdmVudD5cIiAtIFJldHVybnMgaW5mb3JtYXRpb24gYWJvdXQgYSBwcm9wb3NhbFxuICAgICAgICAqIEUuZy4gXCJHb3Zlcm5vckJyYXZvIEdvdmVybm9yU2NlbmFyaW8gUHJvcG9zYWwgTGFzdFByb3Bvc2FsIFZvdGUgRm9yXCJcbiAgICAgIGAsXG4gICAgICBcIlByb3Bvc2FsXCIsXG4gICAgICBbXG4gICAgICAgIG5ldyBBcmcoXCJnb3Zlcm5vclwiLCBnZXRHb3Zlcm5vclYpLFxuICAgICAgICBuZXcgQXJnKFwicGFyYW1zXCIsIGdldEV2ZW50ViwgeyB2YXJpYWRpYzogdHJ1ZSB9KSxcbiAgICAgIF0sXG4gICAgICAod29ybGQsIGZyb20sIHsgZ292ZXJub3IsIHBhcmFtcyB9KSA9PlxuICAgICAgICBwcm9jZXNzUHJvcG9zYWxFdmVudCh3b3JsZCwgZ292ZXJub3IsIHBhcmFtcy52YWwsIGZyb20pLFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuICAgIG5ldyBDb21tYW5kPHsgZ292ZXJub3I6IEdvdmVybm9yQnJhdm87IGJsb2NrTnVtYmVyOiBOdW1iZXJWIH0+KFxuICAgICAgYFxuICAgICAgICAjIyMjIFNldEJsb2NrTnVtYmVyXG5cbiAgICAgICAgKiBcIkdvdmVybm9yIDxHb3Zlcm5vcj4gU2V0QmxvY2tOdW1iZXIgPFNlY29uZHM+XCIgLSBTZXRzIHRoZSBibG9ja051bWJlciBvZiB0aGUgR292ZXJuYW5jZSBIYXJuZXNzXG4gICAgICAgICogRS5nLiBcIkdvdmVybm9yQnJhdm8gU2V0QmxvY2tOdW1iZXIgNTAwXCJcbiAgICBgLFxuICAgICAgXCJTZXRCbG9ja051bWJlclwiLFxuICAgICAgW25ldyBBcmcoXCJnb3Zlcm5vclwiLCBnZXRHb3Zlcm5vclYpLCBuZXcgQXJnKFwiYmxvY2tOdW1iZXJcIiwgZ2V0TnVtYmVyVildLFxuICAgICAgKHdvcmxkLCBmcm9tLCB7IGdvdmVybm9yLCBibG9ja051bWJlciB9KSA9PlxuICAgICAgICBzZXRCbG9ja051bWJlcih3b3JsZCwgZnJvbSwgZ292ZXJub3IsIGJsb2NrTnVtYmVyKSxcbiAgICAgIHsgbmFtZVBvczogMSB9XG4gICAgKSxcbiAgICBuZXcgQ29tbWFuZDx7IGdvdmVybm9yOiBHb3Zlcm5vckJyYXZvOyBibG9ja1RpbWVzdGFtcDogTnVtYmVyViB9PihcbiAgICAgIGBcbiAgICAgICAgIyMjIyBTZXRCbG9ja1RpbWVzdGFtcFxuXG4gICAgICAgICogXCJHb3Zlcm5vciA8R292ZXJub3I+IFNldEJsb2NrTnVtYmVyIDxTZWNvbmRzPlwiIC0gU2V0cyB0aGUgYmxvY2tUaW1lc3RhbXAgb2YgdGhlIEdvdmVybmFuY2UgSGFybmVzc1xuICAgICAgICAqIEUuZy4gXCJHb3Zlcm5vckJyYXZvIEdvdmVybm9yU2NlbmFyaW8gU2V0QmxvY2tUaW1lc3RhbXAgNTAwXCJcbiAgICBgLFxuICAgICAgXCJTZXRCbG9ja1RpbWVzdGFtcFwiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiZ292ZXJub3JcIiwgZ2V0R292ZXJub3JWKSxcbiAgICAgICAgbmV3IEFyZyhcImJsb2NrVGltZXN0YW1wXCIsIGdldE51bWJlclYpLFxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgZnJvbSwgeyBnb3Zlcm5vciwgYmxvY2tUaW1lc3RhbXAgfSkgPT5cbiAgICAgICAgc2V0QmxvY2tUaW1lc3RhbXAod29ybGQsIGZyb20sIGdvdmVybm9yLCBibG9ja1RpbWVzdGFtcCksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG5cbiAgICBuZXcgQ29tbWFuZDx7IGdvdmVybm9yOiBHb3Zlcm5vckJyYXZvOyBuZXdWb3RpbmdEZWxheTogTnVtYmVyViB9PihcbiAgICAgIGBcbiAgICAgICAgIyMjIyBTZXRWb3RpbmdEZWxheVxuXG4gICAgICAgICogXCJHb3Zlcm5vckJyYXZvIDxHb3Zlcm5vcj4gU2V0Vm90aW5nRGVsYXkgPEJsb2Nrcz5cIiAtIFNldHMgdGhlIHZvdGluZyBkZWxheSBvZiB0aGUgR292ZXJub3JCcmF2b1xuICAgICAgICAqIEUuZy4gXCJHb3Zlcm5vckJyYXZvIEdvdmVybm9yQnJhdm9TY2VuYXJpbyBTZXRWb3RpbmdEZWxheSAyXCJcbiAgICBgLFxuICAgICAgXCJTZXRWb3RpbmdEZWxheVwiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiZ292ZXJub3JcIiwgZ2V0R292ZXJub3JWKSxcbiAgICAgICAgbmV3IEFyZyhcIm5ld1ZvdGluZ0RlbGF5XCIsIGdldE51bWJlclYpLFxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgZnJvbSwgeyBnb3Zlcm5vciwgbmV3Vm90aW5nRGVsYXkgfSkgPT5cbiAgICAgICAgc2V0Vm90aW5nRGVsYXkod29ybGQsIGZyb20sIGdvdmVybm9yLCBuZXdWb3RpbmdEZWxheSksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG4gICAgbmV3IENvbW1hbmQ8eyBnb3Zlcm5vcjogR292ZXJub3JCcmF2bzsgbmV3Vm90aW5nUGVyaW9kOiBOdW1iZXJWIH0+KFxuICAgICAgYFxuICAgICAgICAjIyMjIFNldFZvdGluZ1BlcmlvZFxuXG4gICAgICAgICogXCJHb3Zlcm5vckJyYXZvIDxHb3Zlcm5vcj4gU2V0Vm90aW5nUGVyaW9kIDxCbG9ja3M+XCIgLSBTZXRzIHRoZSB2b3RpbmcgcGVyaW9kIG9mIHRoZSBHb3Zlcm5vckJyYXZvXG4gICAgICAgICogRS5nLiBcIkdvdmVybm9yQnJhdm8gR292ZXJub3JCcmF2b1NjZW5hcmlvIFNldFZvdGluZ1BlcmlvZCA1MDBcIlxuICAgIGAsXG4gICAgICBcIlNldFZvdGluZ1BlcmlvZFwiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiZ292ZXJub3JcIiwgZ2V0R292ZXJub3JWKSxcbiAgICAgICAgbmV3IEFyZyhcIm5ld1ZvdGluZ1BlcmlvZFwiLCBnZXROdW1iZXJWKSxcbiAgICAgIF0sXG4gICAgICAod29ybGQsIGZyb20sIHsgZ292ZXJub3IsIG5ld1ZvdGluZ1BlcmlvZCB9KSA9PlxuICAgICAgICBzZXRWb3RpbmdQZXJpb2Qod29ybGQsIGZyb20sIGdvdmVybm9yLCBuZXdWb3RpbmdQZXJpb2QpLFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuICAgIG5ldyBDb21tYW5kPHsgZ292ZXJub3I6IEdvdmVybm9yQnJhdm87IG5ld1Byb3Bvc2FsVGhyZXNob2xkOiBOdW1iZXJWIH0+KFxuICAgICAgYFxuICAgICAgICAjIyMjIFNldFByb3Bvc2FsVGhyZXNob2xkXG5cbiAgICAgICAgKiBcIkdvdmVybm9yQnJhdm8gPEdvdmVybm9yPiBTZXRQcm9wb3NhbFRocmVzaG9sZCA8Q29tcD5cIiAtIFNldHMgdGhlIHByb3Bvc2FsIHRocmVzaG9sZCBvZiB0aGUgR292ZXJub3JCcmF2b1xuICAgICAgICAqIEUuZy4gXCJHb3Zlcm5vckJyYXZvIEdvdmVybm9yQnJhdm9TY2VuYXJpbyBTZXRQcm9wb3NhbFRocmVzaG9sZCA1MDBlMThcIlxuICAgIGAsXG4gICAgICBcIlNldFByb3Bvc2FsVGhyZXNob2xkXCIsXG4gICAgICBbXG4gICAgICAgIG5ldyBBcmcoXCJnb3Zlcm5vclwiLCBnZXRHb3Zlcm5vclYpLFxuICAgICAgICBuZXcgQXJnKFwibmV3UHJvcG9zYWxUaHJlc2hvbGRcIiwgZ2V0TnVtYmVyViksXG4gICAgICBdLFxuICAgICAgKHdvcmxkLCBmcm9tLCB7IGdvdmVybm9yLCBuZXdQcm9wb3NhbFRocmVzaG9sZCB9KSA9PlxuICAgICAgICBzZXRQcm9wb3NhbFRocmVzaG9sZCh3b3JsZCwgZnJvbSwgZ292ZXJub3IsIG5ld1Byb3Bvc2FsVGhyZXNob2xkKSxcbiAgICAgIHsgbmFtZVBvczogMSB9XG4gICAgKSxcbiAgICAgbmV3IENvbW1hbmQ8eyBnb3Zlcm5vcjogR292ZXJub3JCcmF2bzsgYWRkcmVzczogQWRkcmVzc1YsIGV4cGlyYXRpb246IE51bWJlclYgfT4oXG4gICAgICBgXG4gICAgICAgICMjIyMgU2V0V2hpdGVsaXN0QWNjb3VudEV4cGlyYXRpb25cblxuICAgICAgICAqIFwiR292ZXJub3JCcmF2byA8R292ZXJub3I+IFNldFdoaXRlbGlzdEFjY291bnRFeHBpcmF0aW9uIDxBY2NvdW50PiA8RXhwaXJhdGlvbj5cIiAtIFNldHMgd2hpdGVsaXN0IGFjY291bnQgZXhwaXJhdGlvbiAoYWNjb3VudCBjYW4gcHJvcG9zZSB3aXRob3V0IHByb3Bvc2FsIHRocmVzaG9sZCB1bnRpbCBleHBpcmF0aW9uKVxuICAgICAgICAqIEUuZy4gXCJHb3Zlcm5vckJyYXZvIEdvdmVybm9yQnJhdm9TY2VuYXJpbyBTZXRXaGl0ZWxpc3RBY2NvdW50RXhwaXJhdGlvbiBBcnIwMCAxNjI2Mzg3NzQzXCJcbiAgICBgLFxuICAgICAgXCJTZXRXaGl0ZWxpc3RBY2NvdW50RXhwaXJhdGlvblwiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiZ292ZXJub3JcIiwgZ2V0R292ZXJub3JWKSxcbiAgICAgICAgbmV3IEFyZyhcImFkZHJlc3NcIiwgZ2V0QWRkcmVzc1YpLFxuICAgICAgICBuZXcgQXJnKFwiZXhwaXJhdGlvblwiLCBnZXROdW1iZXJWKSxcbiAgICAgIF0sXG4gICAgICAod29ybGQsIGZyb20sIHsgZ292ZXJub3IsIGFkZHJlc3MsIGV4cGlyYXRpb24gfSkgPT5cbiAgICAgICAgc2V0V2hpdGVsaXN0QWNjb3VudEV4cGlyYXRpb24od29ybGQsIGZyb20sIGdvdmVybm9yLCBhZGRyZXNzLnZhbCwgZXhwaXJhdGlvbiksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG4gICAgbmV3IENvbW1hbmQ8eyBnb3Zlcm5vcjogR292ZXJub3JCcmF2bzsgYWRkcmVzczogQWRkcmVzc1YsIGV4cGlyYXRpb246IE51bWJlclYgfT4oXG4gICAgICBgXG4gICAgICAgICMjIyMgU2V0V2hpdGVsaXN0R3VhcmRpYW5cblxuICAgICAgICAqIFwiR292ZXJub3JCcmF2byA8R292ZXJub3I+IFNldFdoaXRlbGlzdEd1YXJkaWFuIDxBY2NvdW50PlwiIC0gU2V0cyB3aGl0ZWxpc3RHdWFyZGlhbiBhY2NvdW50XG4gICAgICAgICogRS5nLiBcIkdvdmVybm9yQnJhdm8gR292ZXJub3JCcmF2b1NjZW5hcmlvIFNldFdoaXRlbGlzdEd1YXJkaWFuIFJvYmVydFwiXG4gICAgYCxcbiAgICAgIFwiU2V0V2hpdGVsaXN0R3VhcmRpYW5cIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImdvdmVybm9yXCIsIGdldEdvdmVybm9yViksXG4gICAgICAgIG5ldyBBcmcoXCJhZGRyZXNzXCIsIGdldEFkZHJlc3NWKSxcbiAgICAgIF0sXG4gICAgICAod29ybGQsIGZyb20sIHsgZ292ZXJub3IsIGFkZHJlc3MsIGV4cGlyYXRpb24gfSkgPT5cbiAgICAgICAgc2V0V2hpdGVsaXN0R3VhcmRpYW4od29ybGQsIGZyb20sIGdvdmVybm9yLCBhZGRyZXNzLnZhbCksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG4gICAgbmV3IENvbW1hbmQ8eyBnb3Zlcm5vcjogR292ZXJub3JCcmF2bzsgZ292ZXJub3JBbHBoYTogQWRkcmVzc1YgfT4oXG4gICAgICBgXG4gICAgICAgICMjIyMgSW5pdGlhdGVcblxuICAgICAgICAqIFwiR292ZXJub3JCcmF2byA8R292ZXJub3I+IEluaXRpYXRlIDxBZGRyZXNzVj5cIiAtIEluaXRpYXRlcyB0aGUgR292ZXJub3IgcmVsaWV2aW5nIHRoZSBnaXZlbiBHb3Zlcm5vckFscGhhXG4gICAgICAgICogRS5nLiBcIkdvdmVybm9yQnJhdm8gR292ZXJub3JCcmF2b1NjZW5hcmlvIEluaXRpYXRlIChBZGRyZXNzIEdvdmVybm9yQWxwaGEpXCJcbiAgICBgLFxuICAgICAgXCJJbml0aWF0ZVwiLFxuICAgICAgW1xuICAgICAgICBuZXcgQXJnKFwiZ292ZXJub3JcIiwgZ2V0R292ZXJub3JWKSxcbiAgICAgICAgbmV3IEFyZyhcImdvdmVybm9yQWxwaGFcIiwgZ2V0QWRkcmVzc1YpLFxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgZnJvbSwgeyBnb3Zlcm5vciwgZ292ZXJub3JBbHBoYSB9KSA9PlxuICAgICAgICBpbml0aWF0ZSh3b3JsZCwgZnJvbSwgZ292ZXJub3IsIGdvdmVybm9yQWxwaGEudmFsKSxcbiAgICAgIHsgbmFtZVBvczogMSB9XG4gICAgKSxcbiAgICBuZXcgQ29tbWFuZDx7IGdvdmVybm9yOiBHb3Zlcm5vckJyYXZvIH0+KFxuICAgICAgYFxuICAgICAgICAjIyMjIEhhcm5lc3NJbml0aWF0ZVxuXG4gICAgICAgICogXCJHb3Zlcm5vckJyYXZvIDxHb3Zlcm5vcj4gSGFybmVzc0luaXRpYXRlXCIgLSBVc2VzIGhhcm5lc3MgZnVuY3Rpb24gdG8gYnlwYXNzIGluaXRpYXRlIGZvciB0ZXN0aW5nXG4gICAgICAgICogRS5nLiBcIkdvdmVybm9yQnJhdm8gR292ZXJub3JCcmF2b1NjZW5hcmlvIEhhcm5lc3NJbml0aWF0ZVwiXG4gICAgYCxcbiAgICAgIFwiSGFybmVzc0luaXRpYXRlXCIsXG4gICAgICBbbmV3IEFyZyhcImdvdmVybm9yXCIsIGdldEdvdmVybm9yVildLFxuICAgICAgKHdvcmxkLCBmcm9tLCB7IGdvdmVybm9yIH0pID0+IGhhcm5lc3NJbml0aWF0ZSh3b3JsZCwgZnJvbSwgZ292ZXJub3IpLFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuICAgIG5ldyBDb21tYW5kPHsgZ292ZXJub3I6IEdvdmVybm9yQnJhdm87IG5ld0ltcGxlbWVudGF0aW9uOiBHb3Zlcm5vckJyYXZvIH0+KFxuICAgICAgYFxuICAgICAgICAjIyMjIFNldEltcGxlbWVudGF0aW9uXG5cbiAgICAgICAgKiBcIkdvdmVybm9yQnJhdm8gPEdvdmVybm9yPiBTZXRJbXBsZW1lbnRhdGlvbiA8R292ZXJub3I+XCIgLSBTZXRzIHRoZSBhZGRyZXNzIGZvciB0aGUgR292ZXJub3JCcmF2byBpbXBsZW1lbnRhdGlvblxuICAgICAgICAqIEUuZy4gXCJHb3Zlcm5vckJyYXZvIEdvdmVybm9yQnJhdm9TY2VuYXJpbyBTZXRJbXBsZW1lbnRhdGlvbiBuZXdJbXBsZW1lbnRhdGlvblwiXG4gICAgYCxcbiAgICAgIFwiU2V0SW1wbGVtZW50YXRpb25cIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImdvdmVybm9yXCIsIGdldEdvdmVybm9yViksXG4gICAgICAgIG5ldyBBcmcoXCJuZXdJbXBsZW1lbnRhdGlvblwiLCBnZXRHb3Zlcm5vclYpLFxuICAgICAgXSxcbiAgICAgICh3b3JsZCwgZnJvbSwgeyBnb3Zlcm5vciwgbmV3SW1wbGVtZW50YXRpb24gfSkgPT5cbiAgICAgICAgc2V0SW1wbGVtZW50YXRpb24od29ybGQsIGZyb20sIGdvdmVybm9yLCBuZXdJbXBsZW1lbnRhdGlvbiksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG4gICAgbmV3IENvbW1hbmQ8eyBnb3Zlcm5vcjogR292ZXJub3JCcmF2bzsgbmV3UGVuZGluZ0FkbWluOiBBZGRyZXNzViB9PihcbiAgICAgIGBcbiAgICAgICAgIyMjIyBTZXRQZW5kaW5nQWRtaW5cblxuICAgICAgICAqIFwiR292ZXJub3JCcmF2byA8R292ZXJub3I+IFNldFBlbmRpbmdBZG1pbiA8QWRkcmVzc1Y+XCIgLSBTZXRzIHRoZSBhZGRyZXNzIGZvciB0aGUgR292ZXJub3JCcmF2byBwZW5kaW5nIGFkbWluXG4gICAgICAgICogRS5nLiBcIkdvdmVybm9yQnJhdm8gR292ZXJub3JCcmF2b1NjZW5hcmlvIFNldFBlbmRpbmdBZG1pbiBuZXdBZG1pblwiXG4gICAgYCxcbiAgICAgIFwiU2V0UGVuZGluZ0FkbWluXCIsXG4gICAgICBbXG4gICAgICAgIG5ldyBBcmcoXCJnb3Zlcm5vclwiLCBnZXRHb3Zlcm5vclYpLFxuICAgICAgICBuZXcgQXJnKFwibmV3UGVuZGluZ0FkbWluXCIsIGdldEFkZHJlc3NWKSxcbiAgICAgIF0sXG4gICAgICAod29ybGQsIGZyb20sIHsgZ292ZXJub3IsIG5ld1BlbmRpbmdBZG1pbiB9KSA9PlxuICAgICAgICBzZXRQZW5kaW5nQWRtaW4od29ybGQsIGZyb20sIGdvdmVybm9yLCBuZXdQZW5kaW5nQWRtaW4udmFsKSxcbiAgICAgIHsgbmFtZVBvczogMSB9XG4gICAgKSxcbiAgICBuZXcgQ29tbWFuZDx7IGdvdmVybm9yOiBHb3Zlcm5vckJyYXZvIH0+KFxuICAgICAgYFxuICAgICAgICAjIyMjIEFjY2VwdEFkbWluXG5cbiAgICAgICAgKiBcIkdvdmVybm9yQnJhdm8gPEdvdmVybm9yPiBBY2NlcHRBZG1pblwiIC0gUGVuZGluZyBhZG1pbiBhY2NlcHRzIHRoZSBhZG1pbiByb2xlXG4gICAgICAgICogRS5nLiBcIkdvdmVybm9yQnJhdm8gR292ZXJub3JCcmF2b1NjZW5hcmlvIEFjY2VwdEFkbWluXCJcbiAgICBgLFxuICAgICAgXCJBY2NlcHRBZG1pblwiLFxuICAgICAgW25ldyBBcmcoXCJnb3Zlcm5vclwiLCBnZXRHb3Zlcm5vclYpXSxcbiAgICAgICh3b3JsZCwgZnJvbSwgeyBnb3Zlcm5vciB9KSA9PiBhY2NlcHRBZG1pbih3b3JsZCwgZnJvbSwgZ292ZXJub3IpLFxuICAgICAgeyBuYW1lUG9zOiAxIH1cbiAgICApLFxuXG4gICAgbmV3IENvbW1hbmQ8e1xuICAgICAgZ292ZXJub3JEZWxlZ2F0b3I6IEdvdmVybm9yQnJhdm87XG4gICAgICBnb3Zlcm5vckRlbGVnYXRlOiBHb3Zlcm5vckJyYXZvO1xuICAgIH0+KFxuICAgICAgYCMjIyMgTWVyZ2VBQklcblxuICAgICAgICAqIFwiQ29tcHRyb2xsZXJJbXBsIDxJbXBsPiBNZXJnZUFCSVwiIC0gTWVyZ2VzIHRoZSBBQkksIGFzIGlmIGl0IHdhcyBhIGJlY29tZS5cbiAgICAgICAgKiBFLmcuIFwiQ29tcHRyb2xsZXJJbXBsIE15SW1wbCBNZXJnZUFCSVxuICAgICAgYCxcbiAgICAgIFwiTWVyZ2VBQklcIixcbiAgICAgIFtcbiAgICAgICAgbmV3IEFyZyhcImdvdmVybm9yRGVsZWdhdG9yXCIsIGdldEdvdmVybm9yViksXG4gICAgICAgIG5ldyBBcmcoXCJnb3Zlcm5vckRlbGVnYXRlXCIsIGdldEdvdmVybm9yViksXG4gICAgICBdLFxuICAgICAgKHdvcmxkLCBmcm9tLCB7IGdvdmVybm9yRGVsZWdhdG9yLCBnb3Zlcm5vckRlbGVnYXRlIH0pID0+XG4gICAgICAgIG1lcmdlQUJJKHdvcmxkLCBmcm9tLCBnb3Zlcm5vckRlbGVnYXRvciwgZ292ZXJub3JEZWxlZ2F0ZSksXG4gICAgICB7IG5hbWVQb3M6IDEgfVxuICAgICksXG4gIF07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzR292ZXJub3JCcmF2b0V2ZW50KFxuICB3b3JsZDogV29ybGQsXG4gIGV2ZW50OiBFdmVudCxcbiAgZnJvbTogc3RyaW5nIHwgbnVsbFxuKTogUHJvbWlzZTxXb3JsZD4ge1xuICByZXR1cm4gYXdhaXQgcHJvY2Vzc0NvbW1hbmRFdmVudDxhbnk+KFxuICAgIFwiR292ZXJub3JcIixcbiAgICBnb3Zlcm5vckJyYXZvQ29tbWFuZHMoKSxcbiAgICB3b3JsZCxcbiAgICBldmVudCxcbiAgICBmcm9tXG4gICk7XG59XG4iXX0=